:root {
    --bg: #0b0e14;
    --container: rgba(23,26,33,0.85);
    --chat: rgba(16,19,26,0.9);
    --border: rgba(255,255,255,0.08);
    --user: #6fa3ff;
    --bot: #4caf50;
    --text: #eaeaea;
    --input: rgba(28,32,48,0.85);
    --particle-color: rgba(79,140,255,0.6);
    --glow-primary: rgba(79,140,255,0.8);
    --glow-secondary: rgba(76,175,80,0.8);
}

/* Reset */
* { margin:0; padding:0; box-sizing:border-box; }

body {
    height:100vh;
    background: radial-gradient(circle at top, #151a2e, #080a10 60%);
    font-family:"Poppins", sans-serif;
    color: var(--text);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    cursor:none;
}

/* Background Particles */
body::before {
    content:"";
    position:fixed;
    inset:-40%;
    background:
        radial-gradient(circle at 30% 30%, rgba(79,140,255,0.18), transparent 60%),
        radial-gradient(circle at 70% 70%, rgba(76,175,80,0.18), transparent 60%);
    animation: ambientMove 16s ease-in-out infinite;
    pointer-events:none;
}

body::after {
    content:"";
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background-image: radial-gradient(circle, var(--particle-color) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: particleFloat 20s linear infinite;
    pointer-events:none;
    opacity:0.7;
}

@keyframes ambientMove {50%{transform:translate(80px,-60px);}}
@keyframes particleFloat {0%{transform:translateY(0);}100%{transform:translateY(-100vh);}}

.cursor {
    position: fixed;
    width: 20px; height:20px;
    background: var(--glow-primary);
    border-radius:50%;
    pointer-events:none;
    z-index:9999;
    transition: transform 0.1s ease;
    box-shadow:0 0 20px var(--glow-primary);
}

.cursor:hover {transform:scale(1.5);}

.main-container {
    display:flex; gap:20px;
    width:90vw; max-width:1400px; min-width:520px;
    height:88vh; position:relative;
}

/* Sidebar */
.history-sidebar {
    position:absolute; left:-280px; top:0;
    width:280px; height:100%;
    background: rgba(23,26,33,0.95);
    border-radius:18px;
    padding:16px;
    color: var(--text);
    opacity:0;
    transform:translateX(-20px) rotateY(10deg);
    transition:left 0.8s cubic-bezier(0.68,-0.55,0.265,1.55), opacity 0.8s ease, transform 0.8s ease;
    box-shadow:0 20px 60px rgba(0,0,0,0.9), 0 0 40px var(--glow-primary);
    backdrop-filter: blur(20px);
    z-index:10;
    /* Enable vertical scrolling for the entire sidebar content */
    overflow-y: auto;
}

.history-sidebar.visible {left:0; opacity:1; transform:translateX(0) rotateY(0deg);}

/* Clear Buttons */
.clear-btn {
    margin-top:10px;
    padding:8px 16px;
    border-radius:20px;
    background: rgba(255,255,255,0.1);
    color:#fff;
    border:1px solid rgba(255,255,255,0.2);
    cursor:pointer;
    font-size:13px;
    transition: all 0.3s ease;
}

.clear-btn:hover { background: rgba(255,255,255,0.2); transform:scale(1.05); }

.clear-btn.danger { background: rgba(255,79,79,0.15); border-color: rgba(255,79,79,0.5); }
.clear-btn.danger:hover { background: rgba(255,79,79,0.3); }

/* Sidebar Neon Border */
.history-sidebar::before {
    content:""; position:absolute; inset:0; padding:2px;
    border-radius:18px;
    background: linear-gradient(45deg, #4f8cff, #4caf50, #ff4fd8, #4f8cff);
    background-size:400% 400%;
    animation: neonFlow 4s linear infinite, morphBorder 8s ease-in-out infinite;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    pointer-events:none;
}

@keyframes morphBorder {0%,100%{border-radius:18px;}50%{border-radius:50px;}}
@keyframes neonFlow {50%{background-position:100% 50%;}}

.history-sidebar h3 {text-align:center; margin-bottom:12px; font-weight:700; text-shadow:0 0 20px var(--glow-primary);}
#history-list div {padding:10px; margin-bottom:8px; border-radius:12px; background: rgba(76,175,80,0.15); font-size:14px; cursor:pointer; transition:0.3s; position:relative; overflow:hidden;}
#history-list div:hover{background: rgba(76,175,80,0.3); transform: translateX(8px) scale(1.02); box-shadow:0 0 30px var(--glow-secondary);}

/* Chat container */
.chat-container {
    flex:1; height:88vh;
    background: linear-gradient(180deg, rgba(23,26,33,0.95), rgba(16,19,26,0.9));
    backdrop-filter: blur(26px) saturate(160%);
    border-radius:26px;
    padding:22px;
    display:flex; flex-direction:column; position:relative;
    box-shadow:0 40px 90px rgba(0,0,0,0.8), inset 0 0 0 1px rgba(255,255,255,0.04), 0 0 60px var(--glow-primary);
    animation: floatCard 10s ease-in-out infinite, pulseGlow 4s ease-in-out infinite;
}

@keyframes floatCard {50%{transform:translateY(-10px);}}
@keyframes pulseGlow {0%,100%{box-shadow:0 40px 90px rgba(0,0,0,0.8), inset 0 0 0 1px rgba(255,255,255,0.04), 0 0 60px var(--glow-primary);}50%{box-shadow:0 40px 90px rgba(0,0,0,0.8), inset 0 0 0 1px rgba(255,255,255,0.04), 0 0 100px var(--glow-primary);}}

.chat-container::before {
    content:""; position:absolute; inset:0; padding:2px; border-radius:26px;
    background: linear-gradient(120deg, #4f8cff, #4caf50, #ff4fd8, #4f8cff);
    background-size:300% 300%;
    animation: neonFlow 6s linear infinite, morphBorder 10s ease-in-out infinite;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    pointer-events:none;
}

/* Header */
.chat-header{text-align:center; padding-bottom:14px; border-bottom:1px solid var(--border);}
.chat-header .title{font-size:30px; font-weight:800; letter-spacing:2px; background:linear-gradient(90deg,#4f8cff,#4caf50,#ff4fd8); background-size:300%; -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:titleShift 6s linear infinite, textGlow 2s ease-in-out infinite; text-shadow:0 0 30px var(--glow-primary);}
.chat-header .subtitle{font-size:12px; letter-spacing:5px; opacity:0.7; margin-top:6px;}

/* Chat box */
#chat-box {
    flex:1; margin-top:16px; background:var(--chat); border-radius:18px; padding:24px; 
    overflow-y:auto;  /* Enable vertical scrolling */
    scrollbar-width: none;  /* Hide scrollbar for Firefox */
    -ms-overflow-style: none;  /* Hide scrollbar for IE/Edge */
    display:flex; flex-direction:column; gap:14px; position:relative;
}
#chat-box::-webkit-scrollbar { display: none; }  /* Hide scrollbar for Webkit browsers (Chrome, Safari) */

#chat-box::after {content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent 40%, rgba(255,255,255,0.05), transparent 60%); animation: shimmer 14s linear infinite; pointer-events:none;}
@keyframes shimmer {from{transform:translateX(-100%);}to{transform:translateX(100%);}}

.user, .bot {
    max-width:72%; 
    min-width: 200px;  /* Prevent shrinking below this width */
    flex-shrink: 0;  /* Prevent flexbox from shrinking the message bubbles */
    padding:16px 20px; 
    border-radius:18px; 
    line-height:1.6; 
    animation:popIn 0.45s cubic-bezier(.22,1,.36,1); 
    backdrop-filter:blur(14px); 
    position:relative; 
    overflow:hidden;
}
@keyframes popIn{from{opacity:0; transform:translateY(24px) scale(0.95) rotateX(10deg); filter:blur(8px);}}

.user{margin-left:auto; background: rgba(79,140,255,0.22); color:var(--user); box-shadow:0 0 30px rgba(79,140,255,0.25),0 10px 20px rgba(0,0,0,0.2);}
.bot{margin-right:auto; background: rgba(76,175,80,0.22); color:var(--bot); box-shadow:0 0 30px rgba(76,175,80,0.25),0 10px 20px rgba(0,0,0,0.2);}
.user:hover, .bot:hover{transform:translateY(-5px) rotateX(-5deg); box-shadow:0 20px 40px rgba(0,0,0,0.3);}

/* Input area */
.input-area{display:flex; gap:14px; margin-top:18px;}
input{flex:1; padding:16px 22px; background:var(--input); border:1px solid var(--border); border-radius:50px; color:var(--text); font-size:15px; outline:none; transition:box-shadow 0.3s ease, transform 0.3s ease;}
input:focus{box-shadow:0 0 0 2px rgba(79,140,255,0.5),0 0 30px rgba(79,140,255,0.6); transform:scale(1.02);}
button{padding:16px 28px; border-radius:50px; border:none; background:linear-gradient(135deg,#4f8cff,#6fa3ff); color:white; font-weight:600; cursor:pointer; position:relative; overflow:hidden; transition: transform 0.3s ease, box-shadow 0.3s ease;}
button::after{content:""; position:absolute; inset:0; background: radial-gradient(circle, rgba(255,255,255,0.5), transparent 60%); opacity:0; transition:0.25s;}
button:hover{transform:translateY(-3px) scale(1.05); box-shadow:0 10px 30px var(--glow-primary);}
button:hover::after{opacity:1;}
button:active{transform:scale(0.96);}
button::before{content:""; position:absolute; top:50%; left:50%; width:0; height:0; background:rgba(255,255,255,0.6); border-radius:50%; transform:translate(-50%,-50%); transition:width 0.6s, height 0.6s;}
button:active::before{width:300px; height:300px;}

/* Mobile */
@media (max-width:768px){
    .chat-container{width:100vw;height:100vh;border-radius:0;}
    .history-sidebar{width:250px; left:-250px;}
    .history-sidebar.visible{left:0;}
    .cursor{display:none;}
}

/* Typing animation for title */
.typing-title{font-size:30px; font-weight:800; letter-spacing:2px; white-space:nowrap; overflow:hidden; border-right:3px solid var(--glow-primary); animation:blink 0.8s infinite;}
@keyframes blink{50%{border-color:transparent;}}

/* Missing animations */
@keyframes titleShift {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
@keyframes textGlow {0%,100%{text-shadow:0 0 30px var(--glow-primary);}50%{text-shadow:0 0 50px var(--glow-primary), 0 0 70px var(--glow-primary);}}